using System;
using System.Collections.Generic;
using System.Data;
using System.Data.SqlClient;
using System.Globalization;
using System.Linq;
using System.Text.RegularExpressions;
using System.Web;
using System.Web.DynamicData;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class Faculty1 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        DataTable resultsTable = ExecuteProc();

        // Bind the results to the GridView
        GridView1.DataSource = resultsTable;
        GridView1.DataBind();
    }

    private DataTable ExecuteProc()
    {
        DataTable dataTable = new DataTable();

        //TODO:
        string connectionString = "Data Source=MOEEZ\\SQLEXPRESS;Initial Catalog=flex2;Integrated Security=True";

        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            //error1.Text = search_choice.Text;
            string query = "EXEC GET_COURSE_OF_TEACHER '1235'";
            //string test = " where l.Username = '" + text + "';";

            //query += test;

            using (SqlCommand command = new SqlCommand(query, connection))
            {
                command.CommandType = CommandType.Text;

                connection.Open();

                using (SqlDataAdapter adapter = new SqlDataAdapter(command))
                {
                    adapter.Fill(dataTable);
                }
            }
        }
        return dataTable;
    }
}